<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To√°n 6: Ba ƒëi·ªÉm th·∫≥ng h√†ng - Ch√¢n tr·ªùi s√°ng t·∫°o</title>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], processEscapes: true },
            options: { enableMenu: false }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary: #2e7d32; /* Xanh l√° ƒë·∫≠m */
            --secondary: #455a64; 
            --accent: #f57c00; /* Cam n·ªïi b·∫≠t */
            --bg: #f1f8e9;
            --point-color: #d32f2f; 
            --line-color: #1976d2;
            --correct: #2e7d32; 
            --wrong: #c62828;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 20px; line-height: 1.6; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        
        .header { text-align: center; background: linear-gradient(135deg, var(--primary), #1b5e20); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; }

        .section-title { color: var(--primary); border-bottom: 3px solid var(--primary); display: inline-block; margin-top: 30px; padding-bottom: 5px; }
        .lesson-card { background: #fffde7; padding: 25px; border-radius: 15px; border-left: 10px solid #fbc02d; margin-bottom: 20px; }
        .info-box { background: white; padding: 20px; border-radius: 10px; border: 1px solid #e0e0e0; margin: 15px 0; box-shadow: inset 0 2px 5px rgba(0,0,0,0.02); }
        
        .static-img { text-align: center; margin: 20px 0; padding: 15px; background: #fafafa; border-radius: 10px; border: 1px solid #eee; }
        .img-label { font-size: 0.9rem; color: #666; font-style: italic; margin-top: 8px; }

        .sim-container { text-align: center; background: #263238; color: white; padding: 30px; border-radius: 20px; margin: 40px 0; }
        canvas { background: #fff; border-radius: 10px; max-width: 100%; border: 2px solid #546e7a; cursor: crosshair; }
        .slider-ui { width: 80%; margin: 25px auto; }

        #quiz-auth { text-align: center; padding: 40px; background: #e8f5e9; border-radius: 15px; border: 2px solid var(--primary); }
        .input-name { padding: 12px; width: 280px; border-radius: 8px; border: 2px solid var(--primary); font-size: 1rem; }
        #quiz-content { display: none; }
        .q-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
        .option-btn { padding: 12px; border: 2px solid #dee2e6; border-radius: 10px; cursor: pointer; text-align: center; transition: 0.3s; }
        .option-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }
        
        .drop-zone { display: inline-block; width: 140px; height: 35px; border: 2px dashed #999; vertical-align: middle; border-radius: 8px; background: #f9f9f9; text-align: center; line-height: 35px; }
        .draggable { display: inline-block; padding: 5px 12px; background: var(--secondary); color: white; border-radius: 5px; cursor: grab; margin: 5px; }
        
        .ans-feedback { display: none; margin-top: 10px; font-weight: bold; }
        .btn { padding: 15px 40px; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 1.1rem; transition: 0.3s; }
        .btn-main { background: var(--primary); color: white; }
    </style>
</head>
<body>
<style>
    .header-wrapper {
        display: flex;
        align-items: center;
        padding: 20px;
        background: #0581be;
        position: relative; /* L√†m g·ªëc ƒë·ªÉ cƒÉn ch·ªânh */
        border-bottom: 2px solid #00adef; /* ƒê∆∞·ªùng k·∫ª xanh ƒë·∫∑c tr∆∞ng Ch√¢n tr·ªùi s√°ng t·∫°o */
    }

    .logo-img {
        width: 80px; 
        height: 80px; 
        border-radius: 50%; 
        border: 2px solid #eee;
        z-index: 2; /* ƒê·∫£m b·∫£o logo lu√¥n n·ªïi l√™n tr√™n */
    }

    .title-content {
        flex-grow: 1;      /* Chi·∫øm to√†n b·ªô kh√¥ng gian c√≤n l·∫°i */
        text-align: center; /* CƒÉn gi·ªØa n·ªôi dung ch·ªØ */
        margin-right: 80px; /* B√π l·∫°i kho·∫£ng c√°ch c·ªßa logo ƒë·ªÉ ch·ªØ n·∫±m ch√≠nh gi·ªØa m√†n h√¨nh */
    }

    .title-content h1 {
        margin: 0;
        font-size: 28px;
        color: #0ce73c; /* M√†u xanh ƒë·∫≠m chuy√™n nghi·ªáp */
        text-transform: uppercase;
    }

    .title-content p {
        margin: 5px 0 0 0;
        font-style: italic;
        color: #cef106;
    }
</style>

<div class="header-wrapper">
    <img src="https://lh3.googleusercontent.com/u/0/d/1pvgGXoH3PeMQsKQz1SN7R02gTudoNvHR" 
         alt="Logo" 
         class="logo-img">
    
    <div class="title-content">
        <h1>üìç B√ÄI 2: BA ƒêI·ªÇM TH·∫≤NG H√ÄNG. BA ƒêI·ªÇM KH√îNG TH·∫≤NG H√ÄNG</h1>
        <p>Ng∆∞·ªùi bi√™n so·∫°n: Ph·∫°m Th·ªã Xu√¢n</p>
    </div>
</div>


    <h2 class="section-title">1. Th·∫ø n√†o l√† ba ƒëi·ªÉm th·∫≥ng h√†ng?</h2>
    <div class="lesson-card">
        <div class="info-box">
            <ul>
                <li>Khi ba ƒëi·ªÉm c√πng thu·ªôc m·ªôt ƒë∆∞·ªùng th·∫≥ng, ta n√≥i ch√∫ng <b>th·∫≥ng h√†ng</b>.</li>
                <li>Khi ba ƒëi·ªÉm kh√¥ng c√πng thu·ªôc b·∫•t k√¨ ƒë∆∞·ªùng th·∫≥ng n√†o, ta n√≥i ch√∫ng <b>kh√¥ng th·∫≥ng h√†ng</b>.</li>
            </ul>
        </div>
        <div class="static-img">
            <svg width="500" height="150">
                <line x1="50" y1="50" x2="200" y2="50" stroke="var(--line-color)" stroke-width="2" />
                <circle cx="70" cy="50" r="4" fill="var(--point-color)" /> <text x="65" y="40">$A$</text>
                <circle cx="125" cy="50" r="4" fill="var(--point-color)" /> <text x="120" y="40">$B$</text>
                <circle cx="180" cy="50" r="4" fill="var(--point-color)" /> <text x="175" y="40">$C$</text>
                <text x="70" y="80" font-weight="bold" fill="var(--primary)">A, B, C th·∫≥ng h√†ng</text>

                <circle cx="350" cy="50" r="4" fill="var(--point-color)" /> <text x="345" y="40">$M$</text>
                <circle cx="430" cy="50" r="4" fill="var(--point-color)" /> <text x="425" y="40">$N$</text>
                <circle cx="390" cy="100" r="4" fill="var(--point-color)" /> <text x="385" y="120">$P$</text>
                <text x="330" y="140" font-weight="bold" fill="var(--wrong)">M, N, P kh√¥ng th·∫≥ng h√†ng</text>
            </svg>
            <div class="img-label">H√¨nh 1: Minh h·ªça ba ƒëi·ªÉm th·∫≥ng h√†ng v√† kh√¥ng th·∫≥ng h√†ng</div>
        </div>
    </div>

    <h2 class="section-title">2. Quan h·ªá gi·ªØa ba ƒëi·ªÉm th·∫≥ng h√†ng</h2>
    <div class="lesson-card">
        <div class="info-box">
            <p>V·ªõi ba ƒëi·ªÉm th·∫≥ng h√†ng $A, B, C$ nh∆∞ h√¨nh b√™n d∆∞·ªõi:</p>
            <ul>
                <li>Hai ƒëi·ªÉm $A$ v√† $C$ n·∫±m <b>kh√°c ph√≠a</b> ƒë·ªëi v·ªõi ƒëi·ªÉm $B$.</li>
                <li>Hai ƒëi·ªÉm $B$ v√† $C$ n·∫±m <b>c√πng ph√≠a</b> ƒë·ªëi v·ªõi ƒëi·ªÉm $A$.</li>
                <li>ƒêi·ªÉm $B$ n·∫±m <b>gi·ªØa</b> hai ƒëi·ªÉm $A$ v√† $C$.</li>
            </ul>
        </div>
        <div class="static-img">
            <svg width="400" height="80">
                <line x1="50" y1="40" x2="350" y2="40" stroke="#999" stroke-width="1" stroke-dasharray="5,5" />
                <circle cx="100" cy="40" r="5" fill="black" /> <text x="95" y="30">$A$</text>
                <circle cx="200" cy="40" r="5" fill="black" /> <text x="195" y="30">$B$</text>
                <circle cx="300" cy="40" r="5" fill="black" /> <text x="295" y="30">$C$</text>
            </svg>
            <div class="img-label">H√¨nh 2: ƒêi·ªÉm $B$ n·∫±m gi·ªØa $A$ v√† $C$</div>
        </div>
    </div>

    <div class="sim-container">
        <h2>üéÆ TH·ª∞C NGHI·ªÜM T√çNH TH·∫≤NG H√ÄNG</h2>
        <p>Di chuy·ªÉn ƒëi·ªÉm $P$ ƒë·ªÉ t√¨m v·ªã tr√≠ gi√∫p $M, N, P$ th·∫≥ng h√†ng</p>
        <canvas id="geoCanvas" width="600" height="250"></canvas>
        <div class="slider-ui">
            <label>V·ªã tr√≠ theo chi·ªÅu d·ªçc c·ªßa ƒëi·ªÉm P:</label>
            <input type="range" id="geoSlider" min="50" max="200" value="80" style="width: 100%;">
            <div id="geoReadout" style="color: #ffeb3b; font-size: 1.5rem; margin-top: 15px; font-weight: bold;">ƒêang ki·ªÉm tra...</div>
        </div>
    </div>

    <div id="quiz-auth">
        <h2>üìù KI·ªÇM TRA KI·∫æN TH·ª®C</h2>
        <p>Em h√£y nh·∫≠p t√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu th·ª≠ th√°ch nh√©!</p>
        <input type="text" id="userName" class="input-name" placeholder="T√™n c·ªßa em..."><br><br>
        <button class="btn btn-main" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
    </div>

    <div id="quiz-content">
        <div style="display:flex; justify-content: space-between; padding: 15px; background: var(--secondary); color:white; border-radius: 10px; margin-bottom: 20px;">
            <span>H·ªçc sinh: <b id="stName"></b></span>
            <span>‚è± Th·ªùi gian: <b id="timeClock">10:00</b></span>
        </div>
        <div id="quiz-list"></div>
        <button class="btn btn-main" id="subBtn" onclick="finishQuiz()" style="display:block; margin: 40px auto; background: var(--accent);">N·ªòP B√ÄI</button>
        <div id="final-result" style="text-align:center; font-size: 2rem; font-weight: bold; margin-bottom: 50px;"></div>
    </div>
</div>

<script>
    // --- CANVAS ENGINE (BA ƒêI·ªÇM TH·∫≤NG H√ÄNG) ---
    const canvas = document.getElementById('geoCanvas');
    const ctx = canvas.getContext('2d');
    const slider = document.getElementById('geoSlider');
    const readout = document.getElementById('geoReadout');

    function draw(posY) {
        ctx.clearRect(0,0,600,250);
        
        // C·ªë ƒë·ªãnh M v√† N
        const M = {x: 150, y: 125};
        const N = {x: 450, y: 125};
        const P = {x: 300, y: parseInt(posY)};

        // V·∫Ω ƒë∆∞·ªùng th·∫≥ng ƒëi qua M, N l√†m chu·∫©n
        ctx.beginPath(); ctx.setLineDash([5, 5]);
        ctx.moveTo(50, 125); ctx.lineTo(550, 125);
        ctx.strokeStyle = "#ccc"; ctx.stroke(); ctx.setLineDash([]);

        // V·∫Ω c√°c ƒëi·ªÉm
        const points = [{p: M, n: 'M'}, {p: N, n: 'N'}, {p: P, n: 'P'}];
        points.forEach(item => {
            ctx.beginPath(); ctx.arc(item.p.x, item.p.y, 8, 0, Math.PI*2);
            ctx.fillStyle = (item.n === 'P') ? "#ff5722" : "#2e7d32";
            ctx.fill();
            ctx.fillStyle = "black"; ctx.font = "bold 18px Arial";
            ctx.fillText(item.n, item.p.x - 10, item.p.y - 15);
        });

        // Logic Check: P c√≥ n·∫±m tr√™n ƒë∆∞·ªùng th·∫≥ng MN (y=125) kh√¥ng?
        if(Math.abs(P.y - 125) < 5) {
            readout.innerText = "M, N, P TH·∫≤NG H√ÄNG! (C√πng n·∫±m tr√™n m·ªôt ƒë∆∞·ªùng th·∫≥ng)";
            readout.style.color = "#4caf50";
            // V·∫Ω ƒë∆∞·ªùng th·∫≥ng n·ªëi li·ªÅn khi th·∫≥ng h√†ng
            ctx.beginPath(); ctx.moveTo(100, 125); ctx.lineTo(500, 125);
            ctx.strokeStyle = "#2e7d32"; ctx.lineWidth = 3; ctx.stroke();
        } else {
            readout.innerText = "M, N, P KH√îNG TH·∫≤NG H√ÄNG";
            readout.style.color = "#ffeb3b";
        }
    }
    slider.oninput = () => draw(slider.value);
    draw(80);

    // --- QUIZ SYSTEM ---
    const quizData = [
        { id: 1, type: 'mcq', text: 'Ba ƒëi·ªÉm g·ªçi l√† th·∫≥ng h√†ng khi n√†o?', opts: ['Khi ch√∫ng n·∫±m g·∫ßn nhau', 'Khi ch√∫ng c√πng thu·ªôc m·ªôt ƒë∆∞·ªùng th·∫≥ng', 'Khi ch√∫ng t·∫°o th√†nh m·ªôt h√¨nh tam gi√°c'], corr: 1 },
        { id: 2, type: 'mcq', text: 'N·∫øu ƒëi·ªÉm $M$ n·∫±m gi·ªØa hai ƒëi·ªÉm $A$ v√† $B$ th√¨:', opts: ['$A, M, B$ th·∫≥ng h√†ng', '$A, M, B$ kh√¥ng th·∫≥ng h√†ng', 'ƒêi·ªÉm $A$ n·∫±m gi·ªØa $M$ v√† $B$'], corr: 0 },
        { id: 3, type: 'drag', text: 'K√Ω hi·ªáu n√†o cho bi·∫øt ƒëi·ªÉm $A$ thu·ªôc ƒë∆∞·ªùng th·∫≥ng $d$?', opts: ['$A \\in d$', '$A \\notin d$'], corr: '$A \\in d$' },
        { id: 4, type: 'mcq', text: 'Trong ba ƒëi·ªÉm th·∫≥ng h√†ng, c√≥ bao nhi√™u ƒëi·ªÉm n·∫±m gi·ªØa hai ƒëi·ªÉm c√≤n l·∫°i?', opts: ['Ch·ªâ c√≥ 1 ƒëi·ªÉm', 'C√≥ 2 ƒëi·ªÉm', 'C√≥ 3 ƒëi·ªÉm'], corr: 0 },
        { id: 5, type: 'mcq', text: 'N·∫øu $A, B, C$ th·∫≥ng h√†ng v√† $B$ n·∫±m gi·ªØa $A, C$ th√¨ $A$ v√† $C$ n·∫±m nh∆∞ th·∫ø n√†o v·ªõi $B$?', opts: ['C√πng ph√≠a', 'Kh√°c ph√≠a', 'Tr√πng nhau'], corr: 1 },
        { id: 6, type: 'drag', text: 'Ba ƒëi·ªÉm $X, Y, Z$ kh√¥ng c√πng n·∫±m tr√™n m·ªôt ƒë∆∞·ªùng th·∫≥ng g·ªçi l√†:', opts: ['Th·∫≥ng h√†ng', 'Kh√¥ng th·∫≥ng h√†ng'], corr: 'Kh√¥ng th·∫≥ng h√†ng' },
        { id: 7, type: 'mcq', text: 'C√≥ th·ªÉ v·∫Ω ƒë∆∞·ª£c bao nhi√™u ƒë∆∞·ªùng th·∫≥ng ƒëi qua 3 ƒëi·ªÉm th·∫≥ng h√†ng?', opts: ['0', '1', '3'], corr: 1 }
    ];

    let userAnswers = {};
    let timer;

    function startQuiz() {
        const name = document.getElementById('userName').value;
        if(!name) return alert("Em ∆°i, h√£y nh·∫≠p t√™n c·ªßa m√¨nh v√†o nh√©!");
        document.getElementById('quiz-auth').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('stName').innerText = name;
        renderQuiz();
        
        let t = 600; // 10 ph√∫t
        timer = setInterval(() => {
            t--; let m = Math.floor(t/60), s = t%60;
            document.getElementById('timeClock').innerText = `${m}:${s<10?'0'+s:s}`;
            if(t<=0) finishQuiz();
        }, 1000);
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-list');
        container.innerHTML = "";
        quizData.forEach((q, i) => {
            let div = document.createElement('div');
            div.className = 'q-card';
            div.id = `card_${q.id}`;
            let html = `<b>C√¢u ${i+1}:</b> ${q.text}<br>`;
            
            if(q.type === 'mcq') {
                html += `<div class="options-grid">`;
                q.opts.forEach((o, idx) => {
                    html += `<div class="option-btn" onclick="selectMCQ(${q.id}, ${idx})" id="opt_${q.id}_${idx}">${o}</div>`;
                });
                html += `</div>`;
            } else {
                html += `<div style="margin-top:10px;"><div class="drop-zone" id="dz_${q.id}">Th·∫£ v√†o ƒë√¢y</div> `;
                q.opts.forEach(o => {
                    let cleanId = btoa(unescape(encodeURIComponent(o))).replace(/=/g,''); 
                    html += `<div class="draggable" draggable="true" id="dg_${q.id}_${cleanId}" data-v="${o}">${o}</div>`;
                });
                html += `</div>`;
            }
            html += `<div class="ans-feedback" id="fb_${q.id}"></div>`;
            div.innerHTML = html;
            container.appendChild(div);
        });
        if (window.MathJax) MathJax.typesetPromise();
        initDrag();
    }

    function selectMCQ(qId, idx) {
        userAnswers[qId] = idx;
        document.querySelectorAll(`#card_${qId} .option-btn`).forEach(b => b.classList.remove('selected'));
        document.getElementById(`opt_${qId}_${idx}`).classList.add('selected');
    }

    function initDrag() {
        document.querySelectorAll('.draggable').forEach(d => {
            d.ondragstart = e => e.dataTransfer.setData('text', e.target.id);
        });
        document.querySelectorAll('.drop-zone').forEach(z => {
            z.ondragover = e => e.preventDefault();
            z.ondrop = e => {
                e.preventDefault();
                const id = e.dataTransfer.getData('text');
                const draggedEl = document.getElementById(id);
                if(id.includes(`dg_${z.id.split('_')[1]}`)) {
                    z.innerHTML = ""; 
                    z.appendChild(draggedEl);
                }
            }
        });
    }

    function finishQuiz() {
        clearInterval(timer);
        let score = 0;
        quizData.forEach(q => {
            let isCorrect = false;
            let feedback = document.getElementById(`fb_${q.id}`);
            if(q.type === 'mcq') {
                if(userAnswers[q.id] === q.corr) isCorrect = true;
            } else {
                const zone = document.getElementById(`dz_${q.id}`);
                if(zone.children.length > 0 && zone.children[0].dataset.v === q.corr) isCorrect = true;
            }
            
            feedback.style.display = 'block';
            if(isCorrect) {
                score++; 
                feedback.innerHTML = "<span style='color:green'>‚úì Tuy·ªát v·ªùi! Em tr·∫£ l·ªùi ƒë√∫ng r·ªìi.</span>";
                document.getElementById(`card_${q.id}`).style.border = "2px solid green";
            } else {
                let displayAns = q.type==='mcq' ? q.opts[q.corr] : q.corr;
                feedback.innerHTML = `<span style='color:red'>‚úó Ch∆∞a ƒë√∫ng r·ªìi. ƒê√°p √°n l√†: ${displayAns}</span>`;
                document.getElementById(`card_${q.id}`).style.border = "2px solid red";
            }
        });
        document.getElementById('final-result').innerText = `K·∫æT QU·∫¢ C·ª¶A EM: ${score} / ${quizData.length}`;
        document.getElementById('subBtn').disabled = true;
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>
</body>
</html>
