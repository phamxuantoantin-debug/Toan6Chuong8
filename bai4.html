<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To√°n 6: B√†i 4 - ƒêo·∫°n th·∫≥ng</title>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], processEscapes: true },
            options: { enableMenu: false }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary: #2e7d32; 
            --secondary: #455a64; 
            --accent: #f57c00; 
            --bg: #f1f8e9;
            --point-color: #d32f2f; 
            --line-color: #d32f2f;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 20px; line-height: 1.6; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        
        /* HEADER CHU·∫®N M·∫™U B√ÄI 3 */
        .header-wrapper {
            display: flex;
            align-items: center;
            padding: 20px;
            background: #0581be;
            position: relative;
            border-bottom: 2px solid #00adef;
            margin: -30px -30px 30px -30px;
            border-radius: 20px 20px 0 0;
        }
        .logo-img {
            width: 80px; height: 80px; 
            border-radius: 50%; 
            border: 2px solid #eee;
            z-index: 2;
        }
        .title-content {
            flex-grow: 1;
            text-align: center;
            margin-right: 80px;
        }
        .title-content h1 {
            margin: 0;
            font-size: 28px;
            color: #0ce73c;
            text-transform: uppercase;
        }
        .title-content p {
            margin: 5px 0 0 0;
            font-style: italic;
            color: #cef106;
        }

        /* L√ù THUY·∫æT */
        .section-title { color: var(--primary); border-bottom: 3px solid var(--primary); display: inline-block; margin-top: 30px; padding-bottom: 5px; }
        .lesson-card { background: #fffde7; padding: 25px; border-radius: 15px; border-left: 10px solid #fbc02d; margin-bottom: 20px; }
        .info-box { background: white; padding: 20px; border-radius: 10px; border: 1px solid #e0e0e0; margin: 15px 0; }
        .static-img { text-align: center; margin: 20px 0; padding: 15px; background: #fafafa; border-radius: 10px; border: 1px solid #eee; }
        .img-label { font-size: 0.9rem; color: #666; font-style: italic; margin-top: 8px; }

        /* M√î PH·ªéNG TH∆Ø·ªöC ƒêO */
        .sim-container { background: #263238; color: white; padding: 30px; border-radius: 20px; margin: 40px 0; text-align: center; }
        .drag-box { position: relative; height: 250px; background: white; border-radius: 10px; border: 2px solid #546e7a; overflow: hidden; }
        .ruler { 
            position: absolute; width: 420px; height: 70px; 
            background: rgba(255, 235, 59, 0.85); 
            border: 1px solid #fbc02d; 
            cursor: move; z-index: 10; 
            display: flex; align-items: flex-start; 
            padding-top: 5px; font-size: 11px; color: #333;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .ruler-mark { height: 18px; border-left: 1px solid #333; margin-right: 9.3px; position: relative; }
        .ruler-mark::after { content: attr(data-val); position: absolute; top: 20px; left: -4px; font-weight: bold; }
        .point { position: absolute; width: 12px; height: 12px; background: var(--point-color); border-radius: 50%; z-index: 5; }
        .point-name { position: absolute; font-weight: bold; font-style: italic; font-family: 'Times New Roman'; font-size: 20px; color: #000; }

        /* QUIZ */
        #quiz-auth { text-align: center; padding: 40px; background: #e8f5e9; border-radius: 15px; border: 2px solid var(--primary); }
        .q-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; text-align: left; color: #333; }
        .option-btn { padding: 12px; border: 2px solid #dee2e6; border-radius: 10px; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .option-btn:hover { border-color: var(--primary); background: #f1f8e9; }
        .option-btn.selected { background: var(--primary) !important; color: white; border-color: var(--primary); }
        .btn-main { padding: 15px 40px; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 1.1rem; background: var(--primary); color: white; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-wrapper">
        <img src="https://lh3.googleusercontent.com/u/0/d/1pvgGXoH3PeMQsKQz1SN7R02gTudoNvHR" alt="Logo" class="logo-img">
        <div class="title-content">
            <h1>üìç B√ÄI 4: ƒêO·∫†N TH·∫≤NG. ƒê·ªò D√ÄI ƒêO·∫†N TH·∫≤NG</h1>
            <p>Ng∆∞·ªùi bi√™n so·∫°n: Ph·∫°m Th·ªã Xu√¢n</p>
        </div>
    </div>

    <h2 class="section-title">1. Kh√°i ni·ªám ƒêo·∫°n th·∫≥ng</h2>
    <div class="lesson-card">
        <div class="info-box">
            <ul>
                <li><b>ƒêo·∫°n th·∫≥ng $AB$</b> l√† h√¨nh g·ªìm ƒëi·ªÉm $A$, ƒëi·ªÉm $B$ v√† t·∫•t c·∫£ c√°c ƒëi·ªÉm n·∫±m gi·ªØa $A$ v√† $B$.</li>
                <li>ƒêi·ªÉm $A$ v√† ƒëi·ªÉm $B$ ƒë∆∞·ª£c g·ªçi l√† <b>hai ƒë·∫ßu m√∫t</b> c·ªßa ƒëo·∫°n th·∫≥ng.</li>
            </ul>
        </div>
        
        <div class="static-img">
            <svg width="400" height="80">
                <line x1="80" y1="45" x2="320" y2="45" stroke="var(--line-color)" stroke-width="4" stroke-linecap="round" />
                <circle cx="80" cy="45" r="5" fill="black" />
                <circle cx="320" cy="45" r="5" fill="black" />
                <text x="75" y="30" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="20">A</text>
                <text x="315" y="30" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="20">B</text>
            </svg>
            <div class="img-label">H√¨nh 1: ƒêo·∫°n th·∫≥ng $AB$</div>
        </div>
    </div>

    <h2 class="section-title">2. ƒê·ªô d√†i ƒëo·∫°n th·∫≥ng</h2>
    <div class="lesson-card">
        <div class="info-box">
            <ul>
                <li>M·ªói ƒëo·∫°n th·∫≥ng c√≥ m·ªôt ƒë·ªô d√†i l√† m·ªôt <b>s·ªë d∆∞∆°ng</b>.</li>
                <li>ƒê·ªô d√†i ƒëo·∫°n th·∫≥ng $AB$ c√≤n g·ªçi l√† kho·∫£ng c√°ch gi·ªØa hai ƒëi·ªÉm $A$ v√† $B$.</li>
                <li>N·∫øu hai ƒëi·ªÉm tr√πng nhau, kho·∫£ng c√°ch gi·ªØa ch√∫ng b·∫±ng $0$.</li>
            </ul>
        </div>
        
        <div class="static-img">
    <svg width="500" height="120" viewBox="0 0 500 120">
        <g>
            <line x1="50" y1="50" x2="230" y2="50" stroke="var(--line-color)" stroke-width="3" stroke-linecap="round" />
            <circle cx="50" cy="50" r="4" fill="#333" />
            <circle cx="230" cy="50" r="4" fill="#333" />
            <text x="45" y="40" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="18">A</text>
            <text x="225" y="40" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="18">B</text>
            <text x="110" y="80" font-weight="bold" fill="var(--primary)" font-size="16">$AB = 4\text{ cm}$</text>
        </g>

        <g>
            <line x1="320" y1="50" x2="410" y2="50" stroke="var(--line-color)" stroke-width="3" stroke-linecap="round" />
            <circle cx="320" cy="50" r="4" fill="#333" />
            <circle cx="410" cy="50" r="4" fill="#333" />
            <text x="315" y="40" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="18">C</text>
            <text x="405" y="40" font-family="Times New Roman" font-style="italic" font-weight="bold" font-size="18">D</text>
            <text x="330" y="80" font-weight="bold" fill="var(--primary)" font-size="16">$CD = 2\text{ cm}$</text>
        </g>

        <text x="180" y="110" font-size="18" fill="var(--accent)" font-weight="bold" font-family="Segoe UI, sans-serif">
            K·∫øt lu·∫≠n: $AB > CD$
        </text>
    </svg>
    <div class="img-label">H√¨nh 2: So s√°nh ƒë·ªô d√†i hai ƒëo·∫°n th·∫≥ng b·∫±ng th∆∞·ªõc ƒëo</div>
</div>
    </div>

    <div class="sim-container">
        <h2>üìè TH·ª∞C NGHI·ªÜM: ƒêO ƒê·ªò D√ÄI ƒêO·∫†N TH·∫≤NG</h2>
        <p>K√©o c√¢y th∆∞·ªõc m√†u v√†ng ƒë·ªÉ ƒëo ƒëo·∫°n th·∫≥ng $MN$. ƒêo·∫°n th·∫≥ng n√†y d√†i bao nhi√™u cm?</p>
        
        <div class="drag-box" id="canvas-area">
            <div style="position:absolute; top:120px; left:100px; width:200px; height:4px; background:var(--line-color);"></div>
            <div class="point" style="top:116px; left:100px;"></div>
            <div class="point-name" style="top:90px; left:95px;">M</div>
            <div class="point" style="top:116px; left:300px;"></div>
            <div class="point-name" style="top:90px; left:295px;">N</div>

            <div id="ruler" class="ruler" style="top: 160px; left: 50px;">
                </div>
        </div>
        <p id="ruler-status" style="margin-top:15px; font-weight:bold; color:#ffeb3b;">M·∫πo: ƒê·∫∑t v·∫°ch s·ªë 0 c·ªßa th∆∞·ªõc tr√πng v·ªõi ƒëi·ªÉm M!</p>
    </div>

    <div id="quiz-auth">
        <h2>üìù B√ÄI T·∫¨P C·ª¶NG C·ªê</h2>
        <p>Em h√£y nh·∫≠p t√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu th·ª≠ th√°ch (Th·ªùi gian: 10 ph√∫t)</p>
        <input type="text" id="userName" class="input-name" placeholder="Nh·∫≠p t√™n em..."><br><br>
        <button class="btn-main" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
    </div>

    <div id="quiz-content" style="display:none; margin-top:30px;">
        <div style="display:flex; justify-content: space-between; padding: 15px; background: #263238; color:white; border-radius: 10px; margin-bottom: 20px; position: sticky; top: 10px; z-index: 100;">
            <span>H·ªçc sinh: <b id="stName"></b></span>
            <span>‚è± Th·ªùi gian c√≤n l·∫°i: <b id="timeClock" style="color: #ffeb3b;">10:00</b></span>
        </div>
        
        <div id="quiz-list">
            </div>
        
        <button class="btn-main" id="submit-btn" onclick="finishQuiz()" style="display:block; margin: 40px auto; background: var(--accent); width: 250px;">N·ªòP B√ÄI</button>
        <div id="final-res" style="text-align:center; font-size:1.8rem; font-weight:bold; color:var(--primary); padding-bottom: 50px;"></div>
    </div>
</div>

<script>
    // --- GI·ªÆ NGUY√äN PH·∫¶N CODE TH∆Ø·ªöC ƒêO C≈® C·ª¶A B·∫†N ·ªû ƒê√ÇY ---
    const ruler = document.getElementById('ruler');
    for(let i=0; i<=10; i++) {
        let mark = document.createElement('div'); mark.className = 'ruler-mark';
        mark.setAttribute('data-val', i); ruler.appendChild(mark);
        if(i < 10) { for(let j=0; j<3; j++) { let s = document.createElement('div'); s.className = 'ruler-mark'; s.style.height = '8px'; s.style.opacity = '0.4'; ruler.appendChild(s); } }
    }
    let active = false; let currentX, currentY, initialX, initialY, xOffset = 50, yOffset = 160;
    ruler.addEventListener("mousedown", dragStart); document.addEventListener("mousemove", drag); document.addEventListener("mouseup", dragEnd);
    function dragStart(e) { initialX = e.clientX - xOffset; initialY = e.clientY - yOffset; if (e.target === ruler) active = true; }
    function drag(e) { if (active) { e.preventDefault(); currentX = e.clientX - initialX; currentY = e.clientY - initialY; xOffset = currentX; yOffset = currentY; ruler.style.left = currentX + "px"; ruler.style.top = currentY + "px"; } }
    function dragEnd() { active = false; }

    // --- PH·∫¶N B·ªî SUNG M·ªöI: D·ªÆ LI·ªÜU 10 C√ÇU H·ªéI ---
    const quizData = [
        { q: "ƒêo·∫°n th·∫≥ng $MN$ l√† h√¨nh g·ªìm:", a: ["ƒêi·ªÉm $M$ v√† ƒëi·ªÉm $N$.", "Hai ƒëi·ªÉm $M, N$ v√† t·∫•t c·∫£ c√°c ƒëi·ªÉm n·∫±m gi·ªØa $M$ v√† $N$.", "C√°c ƒëi·ªÉm n·∫±m gi·ªØa $M$ v√† $N$."], c: 1 },
        { q: "N·∫øu ƒëi·ªÉm $A$ tr√πng v·ªõi ƒëi·ªÉm $B$ th√¨ ƒë·ªô d√†i ƒëo·∫°n th·∫≥ng $AB$ b·∫±ng:", a: ["$1$ cm", "$0$", "Kh√¥ng c√≥ ƒë·ªô d√†i"], c: 1 },
        { q: "Cho ƒëo·∫°n th·∫≥ng $AB = 6$ cm. ƒêi·ªÉm $M$ l√† trung ƒëi·ªÉm c·ªßa $AB$ th√¨ ƒë·ªô d√†i $AM$ l√†:", a: ["$3$ cm", "$2$ cm", "$4$ cm"], c: 0 },
        { q: "C√≥ bao nhi√™u ƒëo·∫°n th·∫≥ng ƒëi qua hai ƒëi·ªÉm ph√¢n bi·ªát cho tr∆∞·ªõc?", a: ["V√¥ s·ªë", "$2$ ƒëo·∫°n th·∫≥ng", "Ch·ªâ $1$ ƒëo·∫°n th·∫≥ng"], c: 2 },
        { q: "N·∫øu $AB = 4$ cm, $CD = 40$ mm th√¨:", a: ["$AB > CD$", "$AB < CD$", "$AB = CD$"], c: 2 },
        { q: "Cho ƒëi·ªÉm $K$ n·∫±m gi·ªØa hai ƒëi·ªÉm $H$ v√† $I$. H·ªá th·ª©c n√†o sau ƒë√¢y ƒë√∫ng?", a: ["$HK + KI = HI$", "$HI + IK = HK$", "$HK + HI = KI$"], c: 0 },
        { q: "ƒê·ªÉ so s√°nh hai ƒëo·∫°n th·∫≥ng, ta d·ª±a v√†o:", a: ["H√¨nh d√°ng c·ªßa ch√∫ng", "ƒê·ªô d√†i c·ªßa ch√∫ng", "V·ªã tr√≠ c·ªßa ch√∫ng"], c: 1 },
        { q: "ƒêo·∫°n th·∫≥ng $AB = 8$ cm. ƒêi·ªÉm $C$ n·∫±m gi·ªØa $A$ v√† $B$ sao cho $AC = 3$ cm. T√≠nh $CB$?", a: ["$11$ cm", "$5$ cm", "$4$ cm"], c: 1 },
        { q: "Tr√™n tia $Ox$, c√≥ $OA = 3$ cm, $OB = 5$ cm. Kh·∫≥ng ƒë·ªãnh n√†o ƒë√∫ng?", a: ["$A$ n·∫±m gi·ªØa $O$ v√† $B$", "$B$ n·∫±m gi·ªØa $O$ v√† $A$", "$O$ n·∫±m gi·ªØa $A$ and $B$"], c: 0 },
        { q: "ƒê·ªô d√†i ƒëo·∫°n th·∫≥ng l√† m·ªôt s·ªë:", a: ["Lu√¥n l·ªõn h∆°n 0", "C√≥ th·ªÉ nh·ªè h∆°n 0", "Lu√¥n b·∫±ng 0"], c: 0 }
    ];

    let userAnswers = Array(quizData.length).fill(null);
    let timer;

    function renderQuiz() {
        const list = document.getElementById('quiz-list');
        list.innerHTML = quizData.map((data, i) => `
            <div class="q-card" id="q-card-${i}">
                <b>C√¢u ${i+1}:</b> ${data.q}
                <div class="option-grid">
                    ${data.a.map((opt, idx) => `
                        <div class="option-btn" onclick="selectOption(${i}, ${idx}, this)" id="opt-${i}-${idx}">${String.fromCharCode(65+idx)}. ${opt}</div>
                    `).join('')}
                </div>
            </div>
        `).join('');
        if (window.MathJax) MathJax.typesetPromise();
    }

    function selectOption(qIdx, optIdx, btn) {
        userAnswers[qIdx] = optIdx;
        const parent = btn.parentElement;
        parent.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
    }

    function startQuiz() {
        const name = document.getElementById('userName').value;
        if(!name) return alert("Em h√£y nh·∫≠p t√™n tr∆∞·ªõc nh√©!");
        
        document.getElementById('stName').innerText = name;
        document.getElementById('quiz-auth').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        
        renderQuiz();
        startTimer(600); // 10 ph√∫t = 600 gi√¢y
    }

    function startTimer(duration) {
        let time = duration;
        timer = setInterval(() => {
            let mins = Math.floor(time / 60);
            let secs = time % 60;
            document.getElementById('timeClock').innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            if (--time < 0) finishQuiz();
        }, 1000);
    }

    function finishQuiz() {
        clearInterval(timer);
        let score = 0;
        quizData.forEach((data, i) => {
            const card = document.getElementById(`q-card-${i}`);
            if (userAnswers[i] === data.c) {
                score++;
                card.style.borderLeft = "10px solid #2e7d32";
            } else {
                card.style.borderLeft = "10px solid #d32f2f";
                // Hi·ªÉn th·ªã ƒë√°p √°n ƒë√∫ng
                const correctBtn = document.getElementById(`opt-${i}-${data.c}`);
                if(correctBtn) correctBtn.style.border = "2px dashed #2e7d32";
            }
        });
        
        const res = document.getElementById('final-res');
        res.innerHTML = `K·∫æT QU·∫¢: ${score}/${quizData.length} C√ÇU ƒê√öNG <br> <span style="font-size: 1rem;">${score >= 8 ? "üåü Gi·ªèi l·∫Øm!" : "üìñ Em c·∫ßn xem k·ªπ b√†i h∆°n nh√©!"}</span>`;
        document.getElementById('submit-btn').style.display = 'none';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>

</body>
</html>
